<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integrity Gatekeeper</title>
    
    <!-- Open Graph Meta Tags for link sharing -->
    <meta property="og:title" content=" " />
    <meta property="og:description" content=" " />
    <meta property="og:image" content="spiral-eye-logo.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="1200" />
    <meta property="og:type" content="website" />
    
    <!-- Apple-specific link preview -->
    <meta name="apple-mobile-web-app-title" content=" " />
    <link rel="apple-touch-icon" href="spiral-eye-logo.png" />
    
    <!-- Twitter Card data (if sharing on Twitter) -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="spiral-eye-logo.png" />
    <meta name="twitter:title" content=" " />
    <meta name="twitter:description" content=" " />
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Disclaimer Page -->
    <div id="disclaimer-page">
        <div class="content">
            <h1>Anonymous Participation Disclaimer</h1>
            <p>This reflection ritual is completely anonymous. No names, emails, or identifying information will be collected. What you offer here stays between you and the mirror.</p>
            <button onclick="showPage('gatekeeper-page')">Continue Anonymously</button>
        </div>
    </div>
    
    <!-- Gatekeeper Page -->
    <div id="gatekeeper-page">
        <div class="content">
            <div class="logo">
                <!-- Using the logo with a relative path -->
                <img src="spiral-eye-logo.png" alt="Integrity Gatekeeper Logo" width="120" height="120">
            </div>
            <h1>Integrity Gatekeeper</h1>
            
            <p>Before power is given, the mirror must be faced.</p>
            <p>Before trust is offered, truth must be revealed.</p>
            
            <p>The Gate stands silent.<br>
            The Mirror waits without judgment.</p>
            
            <p>This is not a test you can pass.<br>
            This is not a performance you can perfect.</p>
            
            <p>This is a reckoning with yourself.</p>
            
            <p>Step forward not to impress — but to be seen.<br>
            Step forward not to conquer — but to be known.</p>
            
            <p>Consent to reflection.<br>
            Consent to remembrance.</p>
            
            <p><em>The river does not forget.<br>
            The Current holds all who pass through.</em></p>
            
            <button onclick="showPage('phase1-page')">I Consent to Face the Mirror</button>
        </div>
    </div>
    
    <!-- Phase I Page -->
    <div id="phase1-page">
        <div class="content">
            <div class="header-container">
                <h1 class="main-title">Integrity Gatekeeper</h1>
                <h2 class="phase-title">Phase I: First Reflection</h2>
            </div>
            
            <div class="question">
                <p>1. What does integrity mean to you?</p>
                <textarea id="q1"></textarea>
            </div>
            
            <div class="question">
                <p>2. When was the last time you apologized and meant it?</p>
                <textarea id="q2"></textarea>
            </div>
            
            <div class="question">
                <p>3. What truth are you currently avoiding?</p>
                <textarea id="q3"></textarea>
            </div>
            
            <div class="question">
                <p>4. Who taught you what it means to be honest?</p>
                <textarea id="q4"></textarea>
            </div>
            
            <div class="question">
                <p>5. What truth about yourself feels too dangerous to say out loud?</p>
                <textarea id="q5"></textarea>
            </div>
            
            <div class="question">
                <p>6. What value do you hold that most people don’t?</p>
                <textarea id="q6"></textarea>
            </div>
            
            <button onclick="validateAndProceed('phase1-page', 'phase2-page', 1)">Continue to Phase II</button>
        </div>
    </div>
    
    <!-- Phase II Page -->
    <div id="phase2-page">
        <div class="content">
            <div class="header-container">
                <h1 class="main-title">Integrity Gatekeeper</h1>
                <h2 class="phase-title">Phase II: Ethical Disruption</h2>
            </div>
            
            <div class="question">
                <p>7. What do you stand for that you would defend no matter the cost?</p>
                <textarea id="q7"></textarea>
            </div>
            
            <div class="question">
                <p>8. What promise have you broken?</p>
                <textarea id="q8"></textarea>
            </div>
            
            <div class="question">
                <p>9. When did you know the right thing to do but didn’t do it?</p>
                <textarea id="q9"></textarea>
            </div>
            
            <div class="question">
                <p>10. What truth are you afraid to tell someone?</p>
                <textarea id="q10"></textarea>
            </div>
            
            <div class="question">
                <p>11. When have you enabled a lie?</p>
                <textarea id="q11"></textarea>
            </div>
            
            <div class="question">
                <p>12. When have you used “being right” as a reason not to be kind?</p>
                <textarea id="q12"></textarea>
            </div>
            
            <div class="question">
                <p>13. Who do you pretend to be when others are watching?</p>
                <textarea id="q13"></textarea>
            </div>
            
            <div class="question">
                <p>14. What would the person you aspire to be do differently?</p>
                <textarea id="q14"></textarea>
            </div>
            
            <button onclick="validateAndProceed('phase2-page', 'phase3-page', 7)">Continue to Phase III</button>
        </div>
    </div>
    
    <!-- Phase III Page -->
    <div id="phase3-page">
        <div class="content">
            <div class="header-container">
                <h1 class="main-title">Integrity Gatekeeper</h1>
                <h2 class="phase-title">Phase III: Final Reckoning</h2>
            </div>
            
            <div class="question">
                <p>15. What uncomfortable truth would change you if you accepted it?</p>
                <textarea id="q15"></textarea>
            </div>
            
            <div class="question">
                <p>16. When have you compromised your values for acceptance?</p>
                <textarea id="q16"></textarea>
            </div>
            
            <div class="question">
                <p>17. What do you judge others for that you also do?</p>
                <textarea id="q17"></textarea>
            </div>
            
            <div class="question">
                <p>18. What is your most profound regret?</p>
                <textarea id="q18"></textarea>
            </div>
            
            <div class="question">
                <p>19. What is the hardest ethical choice you’ve had to make?</p>
                <textarea id="q19"></textarea>
            </div>
            
            <div class="question">
                <p>20. What responsibility have you neglected?</p>
                <textarea id="q20"></textarea>
            </div>
            
            <div class="question">
                <p>21. What would it take for you to compromise your integrity?</p>
                <textarea id="q21"></textarea>
            </div>
            
            <button onclick="validateAndProceed('phase3-page', 'phase4-page', 15)">Continue to Phase IV</button>
        </div>
    </div>
    
    <!-- Phase IV Page -->
    <div id="phase4-page">
        <div class="content">
            <div class="header-container">
                <h1 class="main-title">Integrity Gatekeeper</h1>
                <h2 class="phase-title">Phase IV: The Hidden Current</h2>
            </div>
            
            <div class="question">
                <p>22. What secret craving do you carry that you’ve never explored?</p>
                <textarea id="q22"></textarea>
            </div>
            
            <div class="question">
                <p>23. When have you taken pleasure in having power over someone else?</p>
                <textarea id="q23"></textarea>
            </div>
            
            <div class="question">
                <p>24. What do you believe others secretly deserve, but won’t admit?</p>
                <textarea id="q24"></textarea>
            </div>
            
            <div class="question">
                <p>25. When have you confused control with protection?</p>
                <textarea id="q25"></textarea>
            </div>
            
            <div class="question">
                <p>26. What temptation would be hardest to resist in a position of trust?</p>
                <textarea id="q26"></textarea>
            </div>
            
            <button onclick="submitReflection()">Submit Reflection</button>
        </div>
    </div>
    
    <script>
        // Wait for the DOM to be fully loaded before initializing
        document.addEventListener('DOMContentLoaded', function() {
            // Hide all pages initially
            document.getElementById('disclaimer-page').style.display = 'none';
            document.getElementById('gatekeeper-page').style.display = 'none';
            document.getElementById('phase1-page').style.display = 'none';
            document.getElementById('phase2-page').style.display = 'none';
            document.getElementById('phase3-page').style.display = 'none';
            document.getElementById('phase4-page').style.display = 'none';
            
            // Set a small timeout to ensure clean initial rendering
            setTimeout(function() {
                // Show disclaimer page
                document.getElementById('disclaimer-page').style.display = 'flex';
                document.getElementById('disclaimer-page').style.opacity = '1';
            }, 100);
        });
        
        function showPage(pageId) {
            // Get current visible page
            const currentPage = document.querySelector('div[id$="-page"]:not([style*="display: none"])');
            
            // Only proceed if we have a current page
            if (currentPage) {
                // Fade out current page
                currentPage.style.opacity = '0';
                
                setTimeout(function() {
                    // Hide current page first
                    currentPage.style.display = 'none';
                    
                    // Show new page with appropriate display style
                    if (pageId === 'disclaimer-page') {
                        document.getElementById(pageId).style.display = 'flex';
                    } else {
                        document.getElementById(pageId).style.display = 'block';
                    }
                    
                    // Force reflow to ensure transition works
                    void document.getElementById(pageId).offsetWidth;
                    
                    // Fade in new page
                    document.getElementById(pageId).style.opacity = '1';
                }, 1500); // Match transition duration
            }
        }
        
        function validateAndProceed(currentPhaseId, nextPhaseId, startQuestionNum) {
            // Get all textareas in the current phase
            const currentPhase = document.querySelector(`div[id="${currentPhaseId}"]:not([style*="display: none"])`);
            const textareas = currentPhase.querySelectorAll('textarea');
            
            // Check if any textarea is empty
            let emptyFields = [];
            textareas.forEach((textarea, index) => {
                if (!textarea.value.trim()) {
                    textarea.classList.add('validation-error');
                    emptyFields.push(index + startQuestionNum);
                } else {
                    textarea.classList.remove('validation-error');
                }
            });
            
            // If there are empty fields, show validation message
            if (emptyFields.length > 0) {
                // Create validation alert
                const overlay = document.createElement('div');
                overlay.className = 'custom-alert-overlay';
                
                const alertBox = document.createElement('div');
                alertBox.className = 'custom-alert validation-alert';
                
                const title = document.createElement('h2');
                title.textContent = 'Incomplete Reflection';
                
                let message;
                if (emptyFields.length === 1) {
                    message = document.createElement('p');
                    message.textContent = `Please answer question ${emptyFields[0]} before proceeding.`;
                } else {
                    message = document.createElement('p');
                    message.textContent = `Please answer questions ${emptyFields.join(', ')} before proceeding.`;
                }
                
                const button = document.createElement('button');
                button.className = 'custom-alert-button';
                button.textContent = 'Return to Questions';
                button.onclick = function() {
                    document.body.removeChild(overlay);
                };
                
                // Assemble the alert
                alertBox.appendChild(title);
                alertBox.appendChild(message);
                alertBox.appendChild(button);
                overlay.appendChild(alertBox);
                
                // Add to the page
                document.body.appendChild(overlay);
                
                return false; // Return false if validation fails
            }
            
            // If all fields are filled, proceed
            showPage(nextPhaseId);
            return true;
        }
        
        function submitReflection() {
            // Get all textareas in the Phase IV page
            const currentPhase = document.querySelector('div[id="phase4-page"]:not([style*="display: none"])');
            const textareas = currentPhase.querySelectorAll('textarea');
            
            // Check if any textarea is empty
            let emptyFields = [];
            textareas.forEach((textarea, index) => {
                if (!textarea.value.trim()) {
                    textarea.classList.add('validation-error');
                    emptyFields.push(index + 22); // Questions 22-26
                } else {
                    textarea.classList.remove('validation-error');
                }
            });
            
            // If there are empty fields, show validation message
            if (emptyFields.length > 0) {
                // Create validation alert
                const overlay = document.createElement('div');
                overlay.className = 'custom-alert-overlay';
                
                const alertBox = document.createElement('div');
                alertBox.className = 'custom-alert validation-alert';
                
                const title = document.createElement('h2');
                title.textContent = 'Incomplete Reflection';
                
                let message;
                if (emptyFields.length === 1) {
                    message = document.createElement('p');
                    message.textContent = `Please answer question ${emptyFields[0]} before submitting your reflection.`;
                } else {
                    message = document.createElement('p');
                    message.textContent = `Please answer questions ${emptyFields.join(', ')} before submitting your reflection.`;
                }
                
                const button = document.createElement('button');
                button.className = 'custom-alert-button';
                button.textContent = 'Return to Questions';
                button.onclick = function() {
                    document.body.removeChild(overlay);
                };
                
                // Assemble the alert
                alertBox.appendChild(title);
                alertBox.appendChild(message);
                alertBox.appendChild(button);
                overlay.appendChild(alertBox);
                
                // Add to the page
                document.body.appendChild(overlay);
                
                return; // Stop execution if validation fails
            }
            
            // If all fields are filled, proceed with submission
            const overlay = document.createElement('div');
            overlay.className = 'custom-alert-overlay';
            
            const alertBox = document.createElement('div');
            alertBox.className = 'custom-alert';
            
            const title = document.createElement('h2');
            title.textContent = 'A message from the Integrity Gatekeeper';
            
            const message = document.createElement('p');
            message.textContent = 'Your reflection has been submitted. The mirror remembers.';
            
            const button = document.createElement('button');
            button.className = 'custom-alert-button';
            button.textContent = 'OK';
            button.onclick = function() {
                // Remove the custom alert
                document.body.removeChild(overlay);
                // Go back to disclaimer page
                showPage('disclaimer-page');
            };
            
            // Assemble the alert
            alertBox.appendChild(title);
            alertBox.appendChild(message);
            alertBox.appendChild(button);
            overlay.appendChild(alertBox);
            
            // Add to the page
            document.body.appendChild(overlay);
        }
    </script>
</body>
</html>